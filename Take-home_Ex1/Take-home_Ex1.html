<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Fangyuan Zhu">

<title>Take-home Exercise 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="Take-home_Ex1_files/libs/clipboard/clipboard.min.js"></script>
<script src="Take-home_Ex1_files/libs/quarto-html/quarto.js"></script>
<script src="Take-home_Ex1_files/libs/quarto-html/popper.min.js"></script>
<script src="Take-home_Ex1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Take-home_Ex1_files/libs/quarto-html/anchor.min.js"></script>
<link href="Take-home_Ex1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Take-home_Ex1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Take-home_Ex1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Take-home_Ex1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Take-home_Ex1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take-home Exercise 1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Fangyuan Zhu </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="the-task" class="level2">
<h2 class="anchored" data-anchor-id="the-task">1 The Task</h2>
<p>In this take-home exercise 1, we will use the Age-sex pyramid through <em>Tableau Desktop</em> to visualise demographic structure of population of Singapore. And we will display nine selected planning areas on a single view by using trellis display.</p>
</section>
<section id="the-visualising-tool" class="level2">
<h2 class="anchored" data-anchor-id="the-visualising-tool">2 The Visualising Tool</h2>
<p>Tableau Desktop</p>
</section>
<section id="step-by-step-guide" class="level2">
<h2 class="anchored" data-anchor-id="step-by-step-guide">3 Step-by-step Guide</h2>
<table class="table">
<caption>Procedures to designing visualisation</caption>
<tbody>
<tr class="odd">
<td><h1 id="procedure">Procedure</h1>
<p>#### Step 1</p>
<p>Check the <strong><em>csv</em></strong> and <strong><em>xls</em></strong> file named ‘<em>Singapore Residents by Planning Area / Subzone, Age Group, Sex and Type of Dwelling, June 2022</em>’ from <a href="https://www.singstat.gov.sg/find-data/search-by-theme/population/geographic-distribution/latest-data">Singstat</a>.</p></td>
<td><h1 id="screenshot">Screenshot</h1>
<p><img src="images/paste-CCE80F75.png" class="img-fluid"></p></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><h4 id="step-2" class="anchored">Step 2</h4>
<p>For files with the same content but differed forms, we should choose <strong><em>csv</em></strong> file for its smaller size and friendly readability to <em>Tableau.</em></p></td>
<td><img src="images/paste-5F39A2AD.png" class="img-fluid"><img src="images/paste-AE499458.png" class="img-fluid"></td>
<td></td>
</tr>
<tr class="even">
<td><h4 id="step-3" class="anchored">Step 3</h4>
<p>Because we use the data from the same year, so we don’t need the column named <strong><em>Time</em></strong>, for which all the rows are <em><strong>2022</strong>.</em> Therefore we can <strong>delete</strong> this column to get a cleaner data table. Then we save the file and name it <em>ppl2022.csv.</em></p></td>
<td><img src="images/delete_col.png" class="img-fluid"></td>
<td></td>
</tr>
<tr class="odd">
<td><h4 id="step-4" class="anchored">Step 4</h4>
<p>Import the data into <em>Tableau Desktop</em> by opening the <em>csv</em> file just downloaded.</p></td>
<td><img src="images/tempsnip.png" class="img-fluid" width="800"></td>
<td></td>
</tr>
<tr class="even">
<td><h4 id="step-5" class="anchored">Step 5</h4>
<p>In the <em>Data Source</em> page, see that the data contains <strong>6</strong> fields: <em>PA, SZ, AG, Sex, TOD, POP</em> and <em>Time</em> and <strong>100928</strong> rows. Through checking the data type of the fields from the <em>detail</em> session, noted that data type of the columns named <em>PA, SZ, AG, Sex</em> and <em>TOD</em> are <em>string</em>, and column named <em>Pop</em> are <em>Number (whole).</em></p></td>
<td><img src="images/details.png" class="img-fluid" width="400"></td>
<td></td>
</tr>
<tr class="odd">
<td><h4 id="step-6" class="anchored">Step 6</h4>
<p>Checking the Notes file for the data, we see the explanations of each column:</p>
<ul>
<li><p>PA - Planning Area</p></li>
<li><p>SZ - Subzone</p></li>
<li><p>AG - Age Group</p></li>
<li><p>TOD - Type of Dwelling</p></li>
<li><p>Pop - Resident Count</p></li>
</ul></td>
<td><img src="images/paste-B2BE4E52.png" class="img-fluid"></td>
<td></td>
</tr>
<tr class="even">
<td><h4 id="step-7" class="anchored">Step 7</h4>
<p>Before we start analysing, we can check the raw data information by clicking the black triangle on the top right of the column and clicking <em>Describe…</em> For example, as shown in right, the column <em>PA</em> which means planning area has <strong>55</strong> items and no Null values. We can use the same method to check other columns we need, <em>AG - age</em> and <em>Pop - population,</em> and find no Null values in these columns.</p></td>
<td><img src="images/Dscb_of_age.png" class="img-fluid" width="400"><img src="images/paste-5786373F.png" class="img-fluid" width="547"></td>
<td></td>
</tr>
<tr class="odd">
<td><h4 id="step-8" class="anchored">Step 8</h4>
<p>To build a <em>Age-sex pyramid</em> chart, we need bins of the age. Information of the age column shows that the original data already has 19 bins of age, and the length of each bin is 4, which is quite standard for an Age-sex pyramid chart.</p></td>
<td>AG | | Role: Discrete Dimension | | Type: Database column | | Remote column: [ppl2022.csv].[AG] | | Remote type: ANSI/MBCS character string | Contains NULL: No | | Locale: United States(English) | | Sort flags: Case-sensitive | | Column width: 11 | | Status: Valid | | Domain (19 members) | | 0_to_4 | | 10_to_14 | | 15_to_19 | | 20_to_24 | | 25_to_29 | | 30_to_34 | | 35_to_39 | | 40_to_44 | | 45_to_49 | | 5_to_9 | | 50_to_54 | | 55_to_59 | | 60_to_64 | | 65_to_69 | | 70_to_74 | | 75_to_79 | | 80_to_84 | | 85_to_89 | | 90_and_over |</td>
<td></td>
</tr>
<tr class="even">
<td><h4 id="step-9" class="anchored">Step 9</h4>
<p>Then in the new worksheet, we drag the <em>AG</em> to the <em>Row</em> shelf.</p></td>
<td><img src="images/paste-D9BF457B.png" class="img-fluid" width="526"></td>
<td></td>
</tr>
<tr class="odd">
<td><h4 id="step-10" class="anchored">Step 10</h4>
<p>Select <em>Analysis &gt; Create a Calculated Field,</em> and enter <em>Male Population.</em> Then in the pane space, enter formula as shown in right to extract Male population from the <em>Sex.</em></p></td>
<td><img src="images/paste-8EDF7D1D.png" class="img-fluid" width="952"></td>
<td></td>
</tr>
<tr class="even">
<td><h4 id="step-11" class="anchored">Step 11</h4>
<p>As shown on the right, we have Male population now.</p></td>
<td><img src="images/paste-71DF57E8.png" class="img-fluid" width="618"></td>
<td></td>
</tr>
<tr class="odd">
<td><h4 id="step-12" class="anchored">Step 12</h4>
<p>We use the same way to extract female population as shown on the right.</p></td>
<td><img src="images/paste-32948679.png" class="img-fluid" width="565"></td>
<td></td>
</tr>
<tr class="even">
<td><h4 id="step-13" class="anchored">Step 13</h4>
<p>Drag the <em>Male Population</em> and <em>Female Population</em> to the Column shelf.</p></td>
<td><img src="images/paste-1149A101.png" class="img-fluid" width="734"></td>
<td></td>
</tr>
<tr class="odd">
<td><h4 id="step-14" class="anchored">Step 14</h4>
<p>Click the triangle of the <em>PA</em> in the <em>Table</em> shelf, open the filter option and select 1 planning area according to our task requirements.</p></td>
<td><img src="images/PA.png" class="img-fluid" width="1146"></td>
<td></td>
</tr>
<tr class="even">
<td><h4 id="step-15" class="anchored">Step 15</h4>
<p>Drag the <em>Sex</em> to the <em>color</em> to embody different colors to the bar charts for each gender.</p></td>
<td><img src="images/PA-01.png" class="img-fluid" width="1146"></td>
<td></td>
</tr>
<tr class="odd">
<td><h4 id="step-16" class="anchored">Step 16</h4>
<p>According to the code of Age-sex pyramid, Female chart ought to be on the right side. Therefore, we can change the position of <em>Female</em> and <em>Male</em> axis by changing the location of <em>Male Population and Female Population</em> in the <em>column</em> shelf.</p></td>
<td><img src="images/paste-C3CE0347.png" class="img-fluid" width="687"></td>
<td></td>
</tr>
<tr class="even">
<td><h4 id="step-17" class="anchored">Step 17</h4>
<p>Noted that the Female population has at least 19 null values, we can check the data by navigating to <em>Analysis &gt; View Data…</em> Noted that because of the conditional statement we used to extract male population and female population, there will be <em>Null</em> values if the object does not fit the condition. We click on the button and choose the ‘<em>Show data at default position</em>’. So that all null values will be replaced by 0.</p></td>
<td><img src="images/paste-24899ADD.png" class="img-fluid"><img src="images/paste-B8DFEEF8.png" class="img-fluid" width="669"><img src="images/null_values.png" class="img-fluid" width="854"></td>
<td></td>
</tr>
<tr class="odd">
<td><p>Step 18</p>
<p>The next step to create the age-sex pyramid graph is to Right click the axis of Male population &gt; Edit Axis &gt; Reversed.</p></td>
<td><img src="images/axis-01.png" class="img-fluid" width="510"></td>
<td></td>
</tr>
<tr class="even">
<td><p>Step 19</p>
<p>Then we change the aesthetics of the chart. First we change the color of the bar chart by clicking <em>color &gt; Edit color</em> under the <em>Mark.</em></p></td>
<td><img src="images/colr-01.png" class="img-fluid" width="731"></td>
<td></td>
</tr>
<tr class="odd">
<td><p>Step 20</p>
<p>Lastly, we should sort the Y-axis as descending order. Right click beside the y axis &gt; <em>descending.</em></p></td>
<td><img src="images/paste-C253A545.png" class="img-fluid" width="817"></td>
<td></td>
</tr>
<tr class="even">
<td><p>Step 21</p>
<p>Double click the <em>Title</em> and change it to <em>Ang Mo Kio Age-sex Pyramid.</em></p></td>
<td><img src="images/title-01.png" class="img-fluid" width="580"></td>
<td></td>
</tr>
<tr class="odd">
<td><p>Step 22</p>
<p>We can remove the y label to make a tidier chart by right-clicking the y label &gt; <em>Hide Field Labels for Rows…</em></p></td>
<td><img src="images/ylab.png" class="img-fluid" width="450"></td>
<td></td>
</tr>
<tr class="even">
<td><p>Step 22</p>
<p>With the same steps, we create other 8 age-sex pyramid graphs for other planning areas and rename each worksheet.</p></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><p>Step 23</p>
<p>Then we drag all the age-sex pyramid into a new created <em>Dashboard</em> named <em>A-S Pyramid,</em> and adjust the size of the dashboard to <em>1800 px*1200 px.</em></p></td>
<td><img src="images/dshbd.png" class="img-fluid" width="365"></td>
<td></td>
</tr>
<tr class="even">
<td><p>Step</p>
<p>Change the scale name of the y axis</p></td>
<td><img src="images/paste-44467BDD.png" class="img-fluid" width="561"></td>
<td></td>
</tr>
<tr class="odd">
<td><p>Step</p>
<p>We also need to edit the Aliases of <em>AG-age</em> because the original aliases are very tedious. For example, we can change <em>0_to_4</em> to <em>0-4</em> and so on.</p></td>
<td><img src="images/paste-51FCF27F.png" class="img-fluid" width="472"></td>
<td></td>
</tr>
<tr class="even">
<td><p>Step</p>
<p>Right-click the x label <em>PA &gt; Hide Field Labels for Rows…</em> to remove the label for a tidier chart.</p></td>
<td><img src="images/paste-661DE7E8.png" class="img-fluid" width="1117"></td>
<td></td>
</tr>
<tr class="odd">
<td><p>Step</p>
<p>Then we can drag the <em>PA</em> to the column shelf and the name of the planning area will appear on the top of the chart, so that we don’t need the title of the chart appear on the dashboard.</p></td>
<td><img src="images/sub_title.png" class="img-fluid" width="817"></td>
<td></td>
</tr>
<tr class="even">
<td><p>Step</p>
<p>Now we can hide the title in the dashboard with area name on the top of each plot by clicking the triangle of on the right of each sub plot &gt; uncheck the <em>Title.</em></p></td>
<td><img src="images/dsh_hide_ttl.png" class="img-fluid" width="931"></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="the-dashboard" class="level2">
<h2 class="anchored" data-anchor-id="the-dashboard">4 The Dashboard</h2>
<p><img src="images/paste-9955ACB4.png" class="img-fluid"></p>
<section id="discussion" class="level3">
<h3 class="anchored" data-anchor-id="discussion">5 Discussion</h3>
<p>We personally chose 9 planning areas in Singapore and created their <em>Age-sex pyamid</em> and excluded those where population is 0, for example, <em>Changi Bay.</em></p>
<p><img src="images/paste-C8C14FDC.png" class="img-fluid"></p>
<p>Taking a look at the real map, Changi Bay area is not a name of a continent, but a real bay, where there is no residency as shown in the screenshot below.</p>
<p><img src="images/paste-76958C71.png" class="img-fluid"></p>
<p>The age-sex pyramid breaks down a location’s population into male and female genders and age ranges. The layout of our population pyramid shows male population on the left side and female population on the right side. There are mainly three basic types of population pyramids show how different trends are displayed.&nbsp;</p>
<ol type="1">
<li>Rapid Growth</li>
</ol>
<p>A population pyramid that is very wide at the younger ages, characteristic of countries with a high birth rate and perhaps low life expectancy. The population is said to be fast-growing, and the size of each birth cohort increases each year.</p>
<ol start="2" type="1">
<li>Slow Growth</li>
</ol>
<p>A pyramid can be described as stationary if the percentages of population (age and sex) remain approximately constant over time. In a stationary population, the numbers of births and death roughly balance one another.</p>
<ol start="3" type="1">
<li>Negative Growth</li>
</ol>
<p>A population pyramid that is narrowed at the bottom. The population is generally older on average, as the country has long life expectancy, a low death rate, but also a low birth rate. This may suggest that in future there may be a high dependency ratio due to reducing numbers at working ages. This is a typical pattern for a very developed country, with a high level of education, easy access to and incentive to use birth control, good health care, and few negative environmental factors.</p>
<section id="type-i" class="level4">
<h4 class="anchored" data-anchor-id="type-i">5.1 Type I</h4>
<section id="population-structure-of-ang-mo-kio" class="level5">
<h5 class="anchored" data-anchor-id="population-structure-of-ang-mo-kio">5.1.1 Population structure of Ang Mo Kio</h5>
<p><img src="images/paste-9CAD48C4.png" class="img-fluid"></p>
<ul>
<li><p>It is obvious that population structure in Ang Mo Kio area belongs to <strong><em>Negative Growth</em></strong> with a <em>kite shape<strong>,</strong></em> which means <strong>low fertility rate</strong> in this area<em>.</em></p></li>
<li><p>The average age in this area is about 60. As shown in the age-sex pyramid chart, population with the most size is among 60-64 years, and this area has huge number of elderly and middle-aged adults, as ages get smaller or larger, population generally gets smaller.</p></li>
<li><p>In addition, the population of male and female is about equal. There are usually more females than males in the older age ranges since women have a greater life expectancy.</p></li>
<li><p>The chart has a relatively small base and skinny top, which means a low dependency rate in this area.</p></li>
</ul>
</section>
<section id="population-structure-of-queenstown" class="level5">
<h5 class="anchored" data-anchor-id="population-structure-of-queenstown">5.1.2 Population structure of Queenstown</h5>
<p><img src="images/paste-8FE5FEAA.png" class="img-fluid"></p>
<ul>
<li><p>Similar to population structure in Ang Mo Kio, the one in Queenstown area also belongs to <strong><em>Negative Growth,</em></strong> but the total population is less than that in Ang Mo Kio area.</p></li>
<li><p>The average age in this area is around 45 years old, which is yonger than that in Ang Mo Kio area.</p></li>
</ul>
</section>
<section id="population-structure-of-jurong-west" class="level5">
<h5 class="anchored" data-anchor-id="population-structure-of-jurong-west">5.1.3 Population structure of Jurong West</h5>
<p><img src="images/paste-EACCC929.png" class="img-fluid"></p>
<ul>
<li><p>Also noted as <strong><em>Negative Growth,</em></strong> population in this area has a huge number of middle aged citizens.</p></li>
<li><p>The border of this chart is more smooth, which may relates to its large amount of total population.</p></li>
<li><p>The average age in this area is around 40 years old.</p></li>
</ul>
</section>
<section id="population-structure-of-toa-payoh" class="level5">
<h5 class="anchored" data-anchor-id="population-structure-of-toa-payoh">5.1.4 Population structure of Toa Payoh</h5>
<p><img src="images/paste-5F439BF0.png" class="img-fluid"></p>
<ul>
<li><p>With small base and large size in the middle, population structure in this area is also <strong><em>Negative Growth.</em></strong></p></li>
<li><p>Number of population between <strong>30-34 year old</strong> is especially large in this area. It seems like many young adults like to live in this area.</p></li>
<li><p>The average age in this area is around 30 years old.</p></li>
</ul>
</section>
</section>
<section id="type-ii" class="level4">
<h4 class="anchored" data-anchor-id="type-ii">5.2 Type II</h4>
<p>Type II structure has a <em>notch</em> in the middle area.</p>
<section id="population-structure-of-choa-chu-kang" class="level5">
<h5 class="anchored" data-anchor-id="population-structure-of-choa-chu-kang">5.2.1 Population structure of Choa Chu Kang</h5>
<p><img src="images/paste-34255575.png" class="img-fluid"></p>
<ul>
<li><p>The largest population belongs to 50-64 years old and 20-34 years old, seemingly younger adults like to live in this area.</p></li>
<li><p>However, the number of population under 20 years old and above 70 years old takes the smallest part of the total population. Therefore, this population structure also belongs to <strong><em>Negative Growth.</em></strong> And the average age in this area.</p></li>
<li><p>The average age in this area is around 40 years old.</p></li>
</ul>
</section>
<section id="population-structure-of-yishun" class="level5">
<h5 class="anchored" data-anchor-id="population-structure-of-yishun">5.2.2 Population structure of Yishun</h5>
<p><img src="images/paste-67EA9DE5.png" class="img-fluid"></p>
<ul>
<li><p><strong><em>Negative Growth</em></strong> structure with adults take the most part of the population and the small base.</p></li>
<li><p>Low <strong>dependency</strong> <strong>rate</strong> due to small number of children and elderly.</p></li>
<li><p>The average age is around 30 years old.</p></li>
</ul>
</section>
<section id="population-structure-of-pasir-ris" class="level5">
<h5 class="anchored" data-anchor-id="population-structure-of-pasir-ris">5.2.3 Population structure of Pasir Ris</h5>
<p><img src="images/paste-DAA66F88.png" class="img-fluid"></p>
<ul>
<li><p><strong><em>Negative Growth</em></strong> structure with adults take the most part of the population and the small base.</p></li>
<li><p>Especially high portions of population between 55-64 years old and 20-29 years old.</p></li>
<li><p>Low <strong>dependency</strong> <strong>rate</strong> due to small number of children and elderly.</p></li>
<li><p>The average age is around 44 years old.</p></li>
</ul>
</section>
<section id="population-structure-of-novena" class="level5">
<h5 class="anchored" data-anchor-id="population-structure-of-novena">5.2.3 Population structure of Novena</h5>
<p><img src="images/paste-00BA5BFB.png" class="img-fluid"></p>
<ul>
<li><p><strong><em>Negative Growth</em></strong> structure with adults take the most part of the population and the small base.</p></li>
<li><p>The <em>notch</em> in this area locates in age group 20-24, and male kids are more than female kids.</p></li>
<li><p>Low <strong>dependency</strong> <strong>rate</strong> due to small number of children and elderly.</p></li>
<li><p>The average age is around 34 years old.</p></li>
</ul>
</section>
</section>
<section id="type-iii" class="level4">
<h4 class="anchored" data-anchor-id="type-iii">5.3 Type III</h4>
<p>This type of population structure is based on a few population compared to other areas.</p>
<section id="population-structure-of-changi" class="level5">
<h5 class="anchored" data-anchor-id="population-structure-of-changi">5.3.1 Population structure of Changi</h5>
<p><img src="images/paste-F5FCA3E5.png" class="img-fluid"></p>
<ul>
<li><p>Noted a quite asymmetrical shape between left and right parts due to the small total number of the population. The Changi area is around the Changi Airport so that the residency is quite few compared to other areas.</p></li>
<li><p>Generally this area has low fertility rate with a Negative Growth structure because its portions of kids and elderly are small compared to that of other age groups.</p></li>
<li><p>The average age in this area is around 44 years old.</p></li>
</ul>
</section>
</section>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">6 Conclusion</h3>
<table class="table">
<colgroup>
<col style="width: 21%">
<col style="width: 60%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th>Planning Area</th>
<th>Population Structure</th>
<th>Average age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Ang Mo Kio</td>
<td>Negative Growth - kite shape</td>
<td>60</td>
</tr>
<tr class="even">
<td>Queenstown</td>
<td>Negative Growth - kite shape</td>
<td>45</td>
</tr>
<tr class="odd">
<td>Jurong West</td>
<td>Negative Growth - kite shape</td>
<td>40</td>
</tr>
<tr class="even">
<td>Toa Payoh</td>
<td>Negative Growth</td>
<td>30</td>
</tr>
<tr class="odd">
<td>Choa Chu Kang</td>
<td>Negative Growth - kite shape with a notch</td>
<td>40</td>
</tr>
<tr class="even">
<td>Yishun</td>
<td>Negative Growth - kite shape with a notch</td>
<td>30</td>
</tr>
<tr class="odd">
<td>Pasir Ris</td>
<td>Negative Growth - kite shape with a notch</td>
<td>44</td>
</tr>
<tr class="even">
<td>Novea</td>
<td>Negative Growth - kite shape with a notch</td>
<td>34</td>
</tr>
<tr class="odd">
<td>Changi</td>
<td>Negative Growth</td>
<td>44</td>
</tr>
</tbody>
</table>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>